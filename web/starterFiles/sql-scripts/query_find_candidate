CREATE TRIGGER Tr_GetMatchingPercent
AFTER INSERT
ON answers
FOR EACH ROW
SET @UserWhoAnsweredId = 	(select user_id from inserted
                            group by user_id limit 1);
select SubQuery.user_id, count(SubQuery.user_id) as PoprawnaLiczbaOdp
From (
       Select A.user_id, question_id, answer_content from answers as A
         JOIN users as ui on ui.user_id = A.user_id
       Where ui.role = 'CANDIDATE'
             AND  A.question_id IN (select question_id from inserted)
             AND A.user_id <> @UserWhoAnsweredId
             AND A.answer_content = (select answer_content from answers	as t2
       where A.question_id = t2.question_id
             AND A.user_id = t2.user_id)
     ) as SubQuery
Group by SubQuery.user_id
ORDER BY PoprawnaLiczbaOdp DESC
